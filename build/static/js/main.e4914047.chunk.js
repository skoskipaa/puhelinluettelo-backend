(window.webpackJsonppuhelinluettelo=window.webpackJsonppuhelinluettelo||[]).push([[0],{15:function(e,n,t){e.exports=t(38)},37:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(13),o=t.n(c),u=t(14),l=t(2),i=function(e){var n=e.person,t=e.deleteContact;return r.a.createElement("li",null,n.name," ",n.number,r.a.createElement("button",{onClick:t},"Delete"))},m=function(e){var n=e.filterByName,t=e.persons,a=e.deleteContact;return t.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())})).map((function(e){return r.a.createElement(i,{key:e.id,person:e,deleteContact:function(){return a(e.id)}})}))},s=function(e){var n=e.filterByName,t=e.persons,a=e.deleteContact;return r.a.createElement("ul",null,m({filterByName:n,persons:t,deleteContact:a}))},f=function(e){var n=e.onChange,t=e.value;return r.a.createElement("div",null,r.a.createElement("input",{value:t,onChange:n}))},d=function(e){return r.a.createElement("form",{onSubmit:e.addPerson},r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:e.newName,onChange:e.handleNameChange})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{value:e.newNumber,onChange:e.handleNumberChange})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},b=t(3),h=t.n(b),p="/api/persons",v=function(){return h.a.get(p).then((function(e){return e.data}))},w=function(e){return h.a.post(p,e).then((function(e){return e.data}))},E=function(e){return h.a.delete("".concat(p,"/").concat(e)).then((function(e){return e.data}))},g=function(e,n){return h.a.put("".concat(p,"/").concat(e),n).then((function(e){return e.data}))};function O(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}var C=function(){var e=Object(a.useState)([]),n=Object(l.a)(e,2),t=n[0],c=n[1],o=Object(a.useState)(""),i=Object(l.a)(o,2),m=i[0],b=i[1],h=Object(a.useState)(""),p=Object(l.a)(h,2),C=p[0],j=p[1],y=Object(a.useState)(""),N=Object(l.a)(y,2),P=N[0],S=N[1],k=Object(a.useState)(null),D=Object(l.a)(k,2),L=D[0],B=D[1];Object(a.useEffect)((function(){v().then((function(e){c(e)}))}),[]);return r.a.createElement("div",null,r.a.createElement("h1",null,"Phonebook"),r.a.createElement((function(e){var n=e.message;return null===n?null:n.includes("Fail")?r.a.createElement("div",{className:"error"},n):r.a.createElement("div",{className:"success"},n)}),{message:L}),r.a.createElement("h2",null,"Filter contacts by name"),r.a.createElement(f,{onChange:function(e){S(e.target.value)},value:P}),r.a.createElement("h2",null,"Add a new contact"),r.a.createElement(d,{addPerson:function(e){e.preventDefault();var n={name:m,number:C};if(t.map((function(e){return e.name.toLowerCase()})).includes(n.name.toLowerCase())){var a=t.find((function(e){return e.name.toLowerCase()===n.name.toLowerCase()})),r=a.id,o=function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?O(t,!0).forEach((function(n){Object(u.a)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):O(t).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({},a,{number:n.number});window.confirm("".concat(a.name," is already in the phonebook! Replace number?"))&&g(r,o).then((function(e){c(t.map((function(n){return n.id!==r?n:e}))),B("Number changed for ".concat(a.name)),setTimeout((function(){B(null)}),5e3)})).catch((function(e){return console.log("Pieleen m\xe4n")}))}else w(n).then((function(e){c(t.concat(e)),B("".concat(e.name," was added to the phonebook.")),setTimeout((function(){B(null)}),5e3)})).catch((function(e){B("Fail: ".concat(e.response.data.error.toString())),setTimeout((function(){B(null)}),5e3)}));b(""),j("")},newName:m,handleNameChange:function(e){b(e.target.value)},newNumber:C,handleNumberChange:function(e){j(e.target.value)}}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(s,{filterByName:P,persons:t,deleteContact:function(e){var n=t.find((function(n){return n.id===e}));window.confirm("Delete ".concat(n.name," ?"))&&(console.log("deleting contact with id ".concat(e)),E(e).then(c(t.filter((function(n){return n.id!==e})))).then(B("".concat(n.name," have been removed."))).then(setTimeout((function(){B(null)}),5e3)).catch((function(e){B("Fail: ".concat(n.name," has already been removed from server!")),setTimeout((function(){B(null)}),5e3)})))}}))};t(37);o.a.render(r.a.createElement(C,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.e4914047.chunk.js.map